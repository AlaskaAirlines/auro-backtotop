// Copyright (c) 2021 Alaska Airlines. All right reserved. Licensed under the Apache-2.0 license
// See LICENSE in the project root for license information.

// ---------------------------------------------------------------------
@import "./node_modules/@alaskaairux/design-tokens/dist/tokens/SCSSVariables";
@import "./node_modules/@alaskaairux/design-tokens/dist/tokens/SassCustomProperties";

$buttonDim: 40px;

@mixin inline-trigger-activated {
  color: var(--auro-color-ui-hover-on-light, $auro-color-ui-hover-on-light);
}

@mixin fixed-trigger-activated {
  color: var(--auro-color-ui-hover-on-light, $auro-color-ui-hover-on-light);
  background-color: var(--auro-color-brand-neutral-200, $auro-color-brand-neutral-200);
  
  .message {
    max-width: 32ch;
    padding-left: 8px;
  }
}

.reference {
  position: absolute;
  top: 0;
  z-index: -1;
}

.trigger {
  display: inline-flex;
  align-items: center;
  color: var(--auro-color-ui-default-on-light, $auro-color-ui-default-on-light);
  cursor: pointer;
  
  &--inline {
    position: static;
    background-color: transparent;
    border: none;

    &:active,
    &.focus-visible {
      @include inline-trigger-activated;
    }

    &:focus-visible {
      @include inline-trigger-activated;
    }
  }

  &--fixed {
    position: fixed;
    right: 24px;
    bottom: (-$buttonDim - 4px);
    height: $buttonDim;
    min-width: $buttonDim;
    background-color: var(--auro-color-brand-neutral-100, $auro-color-brand-neutral-100);
    border: 1px solid;
    border-color: var(--auro-color-brand-neutral-300, $auro-color-brand-neutral-300);
    border-radius: ($buttonDim / 2);
    box-shadow: rgba(0, 0, 0, 0.2) 0px 3px 5px -1px, rgba(0, 0, 0, 0.14) 0px 6px 10px 0px, rgba(0, 0, 0, 0.12) 0px 1px 18px 0px;
    box-sizing: border-box;
    z-index: 99999;

    .message {
      max-width: 0;
      overflow: hidden;
      white-space: nowrap;
      user-select: none;
    }

    &:active,
    &.focus-visible {
      @include fixed-trigger-activated;
    }
    
    &:focus-visible {
      @include fixed-trigger-activated;
    }
  }

  &--visible {
    bottom: 24px;
  }

  @media (prefers-reduced-motion: no-preference) {
    &--fixed {
      transition: bottom 0.3s ease;
      .message {
        transition: max-width 0.25s ease, padding-left 0.25s ease;
      }
    }
  }

  @media (hover:hover) {
    &--inline:hover {
      @include inline-trigger-activated;
    }
    &--fixed:hover {
      @include fixed-trigger-activated;
    }
  }
}
